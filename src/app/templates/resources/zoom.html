{% extends "base.html" %}
{% block title %}Zoom ресурс | assistchat{% endblock %}

{% block content %}
<main class="wrap">
  <div class="card">
    <div class="row">
      <div>
        <h1 style="margin:0 0 6px">Zoom ресурс</h1>
        <p class="subtitle">ID ресурса: {{ rid }}</p>
      </div>
      <div class="user">
        <a class="btn" href="/resources">← Назад к ресурсам</a>
      </div>
    </div>

    <h2>Загрузить запись</h2>
    <form id="zoom-upload-form" data-rid="{{ rid }}" enctype="multipart/form-data">
      <input type="file" id="zoom-file" accept=".mp3,.mp4" required>
      <button type="submit" class="btn primary">Загрузить</button>
    </form>

    <h2 class="mt-20">Промпт для отчёта</h2>
    <div class="card" style="margin:10px 0;">
      <textarea id="report-prompt" rows="8" style="width:100%;resize:vertical;"
                placeholder="Шаблон промпта для отчёта..."></textarea>
      <div class="mono" style="margin-top:6px;">Шаблон сохраняется локально для этого ресурса.</div>
    </div>

    <h2 class="mt-20">Файлы</h2>
    <div id="zoom-list" class="mt-10"></div>

    <div id="zoom-reports" class="mt-20"></div>
  </div>
</main>

<!-- processing modal -->
<div id="processing-modal" class="pm-backdrop pm-hidden">
  <div class="pm-box">
    <div class="pm-spinner"></div>
    <div class="pm-title">Идет обработка…</div>
  </div>
</div>
{% endblock %}

{% block scripts %}
  {{ super() }}
  <script src="/static/js/resources_zoom.js"></script>
{% endblock %}
