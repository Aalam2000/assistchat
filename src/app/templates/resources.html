<!doctype html>
<html lang="ru">
<head>
    <meta charset="utf-8"/>
    <title>Ресурсы | assistchat</title>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link href="/static/css/base.css" rel="stylesheet"/>
    <link rel="icon" type="image/x-icon" href="/static/favicon.ico">
</head>
<body>
<main class="wrap">
    <div class="card">
        <div class="row">
            <div>
                <h1 style="margin:0 0 6px">Ресурсы</h1>
                <p class="subtitle">Управление всеми подключениями</p>
            </div>
            <div class="user">
                <a class="btn" href="/profile">← Назад в профиль</a>
            </div>
        </div>

        <div class="actions">
            <button id="btnAddResource" class="btn primary">+ Добавить ресурс</button>
        </div>

        <table class="mt-12">
            <thead>
            <tr>
                <th>Провайдер</th>
                <th>Метка</th>
                <th>Статус</th>
                <th>Фаза</th>
                <th>Ошибка</th>
                <th>Действия</th>
            </tr>
            </thead>
            <tbody id="resources-tbody">
            <tr>
                <td colspan="6">Загрузка...</td>
            </tr>
            </tbody>
        </table>
    </div>
</main>

<script src="/static/js/config.js"></script>
<script src="/static/js/api.js"></script>
<script src="/static/js/resources.js"></script>

<div id="addResourceModal" class="modal hidden">
    <div class="modal__content">
        <h3>Добавить ресурс</h3>

        <label>Провайдер</label>
        <select id="provSelect"></select>

        <label>Название (label)</label>
        <input id="resLabel" type="text" placeholder="Мой ресурс">

        <details style="margin:8px 0">
            <summary>Подсказки провайдера</summary>
            <pre id="provHelp" class="note" style="white-space:pre-wrap"></pre>
        </details>

        <label>meta_json (редактируемый шаблон)</label>
        <textarea id="metaEditor" rows="12" style="width:100%;font-family:monospace"></textarea>

        <div class="modal__actions">
            <button id="addResCancel" class="btn">Отмена</button>
            <button id="addResSubmit" class="btn primary">Создать</button>
        </div>
    </div>
</div>

<style>
    .hidden {
        display: none;
    }

    .modal {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, .4);
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .modal__content {
        background: #fff;
        padding: 16px;
        border-radius: 12px;
        width: min(900px, 92vw);
        max-height: 90vh;
        overflow: auto;
    }

    .modal__actions {
        display: flex;
        gap: 8px;
        justify-content: flex-end;
        margin-top: 10px
    }

    .btn {
        padding: 8px 12px;
        border-radius: 10px;
        border: 1px solid #ddd;
        cursor: pointer
    }

    .btn.primary {
        background: #2b7cff;
        color: #fff;
        border-color: #2b7cff
    }

    label {
        font-weight: 600;
        display: block;
        margin-top: 10px;
        margin-bottom: 4px
    }

    .note {
        font-size: 13px;
        opacity: .9
    }
</style>

</body>
</html>
